require-stack-version: ">= 1.6"

resolver: nightly-2021-01-27
compiler: ghc-9.0.0.20201227
skip-ghc-check: true
system-ghc: true
allow-newer: true

packages:
- .
- jni
- jvm
- jvm-batching
- jvm-streaming
- examples/classpath
- examples/directory-server
- benchmarks/wizzardo-http

flags:
  jni:
    linear-types: true
  jvm:
    linear-types: true
  inline-java:
    linear-types: true

extra-deps:
- git: https://github.com/tweag/distributed-closure
  commit: b92e75ec81e646703c7bde4f578a7352ee34f1ad
- git: https://github.com/tweag/linear-base
  commit: e257762b09336fd13afb68c1d9ca5b77d318c8f2

nix:
  shell-file: shell-stack-linear-types.nix
  path: ["nixpkgs=./nixpkgs.nix"]
